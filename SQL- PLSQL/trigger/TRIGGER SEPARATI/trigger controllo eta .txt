--TRIGGER 2:
--l'età minima per la partecipazione all'evento da parte degli artisti è di 18 anni

CREATE OR REPLACE TRIGGER CONTROLLO_ETA
BEFORE INSERT OR UPDATE ON PERSONA
FOR EACH ROW
DECLARE
errore_eta exception;
DIFF_ETA NUMBER(4,0) :=MONTHS_BETWEEN(CURRENT_DATE,:new.DATA_DI_NASCITA);

BEGIN
IF DIFF_ETA<216 THEN
DBMS_OUTPUT.PUT_LINE('DIFFERENZA ETA '||DIFF_ETA);
 RAISE errore_eta;
END IF;
EXCEPTION
WHEN errore_eta THEN
RAISE_APPLICATION_ERROR(-20050,'LA PERSONA CHE SI STA TENTANDO DI INSERIRE E MINORENNE');
END CONTROLLO_ETA;
/
